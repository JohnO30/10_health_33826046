<!-- Main layout template - wraps all pages in the application -->
<!doctype html>
<html>
  <head>
    <!-- Dynamic page title: page-specific title + site name -->
    <title><%= title %> - <%= siteData.siteName %></title>
    <!-- Link to external CSS stylesheet for styling -->
    <link rel="stylesheet" type="text/css" href="/main.css" />
  </head>
  <body>
    <!-- Header section containing site branding and navigation -->
    <header>
      <!-- Site title/logo -->
      <h1><%= siteData.siteName %></h1>
      
      <!-- Main navigation menu -->
      <nav>
        <!-- Public navigation links available to all users -->
        <a href="/">Home</a> |
        <a href="/about">About</a> |
        <a href="/search">Search</a> |
        
        <!-- Conditional navigation based on authentication status -->
        <% if (!session || !session.userId) { %>
          <!-- Links shown to non-authenticated users -->
          <a href="/users/register">Register</a> |
          <a href="/users/login">Login</a>
        <% } else { %>
          <!-- Links shown to authenticated users -->
          <a href="/entries/add">Add Activity</a> |
          <a href="/entries/my">My Activities</a> |
          <a href="/users/logout">Logout</a>
        <% } %>
      </nav>
      
      <!-- Display current logged-in username if session exists -->
      <% if (session && session.username) { %>
        <p>Logged in as <strong><%= session.username %></strong></p>
      <% } %>
    </header>

    <!-- Main content area - individual page content injected here -->
    <main>
      <%- body %>
    </main>
  </body>
</html>
